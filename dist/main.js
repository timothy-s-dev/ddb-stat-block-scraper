(()=>{"use strict";(()=>{const e=e=>{var t,n;return(null===(n=null===(t=e.getElementsByClassName("mon-stat-block__name-link")[0])||void 0===t?void 0:t.textContent)||void 0===n?void 0:n.trim())||void 0},t=(e,t)=>{var n,i,s;const o=[...e.getElementsByClassName("mon-stat-block__attribute-label")].filter((e=>e.textContent===t))[0];return(null===(s=null===(i=null===(n=null==o?void 0:o.parentElement)||void 0===n?void 0:n.getElementsByClassName("mon-stat-block__attribute-data-value")[0])||void 0===i?void 0:i.textContent)||void 0===s?void 0:s.trim())||void 0},n=(e,t)=>{var n,i,s;const o=[...e.getElementsByClassName("mon-stat-block__attribute-label")].filter((e=>e.textContent===t))[0];return(null===(s=null===(i=null===(n=null==o?void 0:o.parentElement)||void 0===n?void 0:n.getElementsByClassName("mon-stat-block__attribute-data-extra")[0])||void 0===i?void 0:i.textContent)||void 0===s?void 0:s.trim())||void 0},i=(e,t)=>{var n,i,s;const o=[...e.getElementsByClassName("ability-block__heading")].filter((e=>e.textContent===t))[0],l=null===(s=null===(i=null===(n=null==o?void 0:o.parentElement)||void 0===n?void 0:n.getElementsByClassName("ability-block__score")[0])||void 0===i?void 0:i.textContent)||void 0===s?void 0:s.trim();return l?parseInt(l):void 0},s=(e,t)=>{var n,i,s;const o=[...e.getElementsByClassName("ability-block__heading")].filter((e=>e.textContent===t))[0];return(null===(s=null===(i=null===(n=null==o?void 0:o.parentElement)||void 0===n?void 0:n.getElementsByClassName("ability-block__modifier")[0])||void 0===i?void 0:i.textContent)||void 0===s?void 0:s.trim())||void 0},o=(e,t)=>{var n,i,s;const o=[...e.getElementsByClassName("mon-stat-block__tidbit-label")].filter((e=>e.textContent===t))[0];return(null===(s=null===(i=null===(n=null==o?void 0:o.parentElement)||void 0===n?void 0:n.getElementsByClassName("mon-stat-block__tidbit-data")[0])||void 0===i?void 0:i.textContent)||void 0===s?void 0:s.trim())||void 0},l=(e,t)=>{var n;const i=null===(n=e.getElementsByClassName("mon-stat-block__description-block")[t])||void 0===n?void 0:n.getElementsByClassName("mon-stat-block__description-block-content")[0];if(!i)return;let s=null;const o=[],l=e=>{const t=(e=>{var t,n,i,s,o,l,a,r;if(e.getElementsByTagName("strong").length>0){const a=null!==(n=null===(t=e.textContent)||void 0===t?void 0:t.indexOf("."))&&void 0!==n?n:0;return{name:null!==(s=null===(i=e.textContent)||void 0===i?void 0:i.substring(0,a))&&void 0!==s?s:null,description:null!==(l=null===(o=e.textContent)||void 0===o?void 0:o.substring(a+1).trim())&&void 0!==l?l:""}}return{name:null,description:null!==(r=null===(a=e.textContent)||void 0===a?void 0:a.trim())&&void 0!==r?r:""}})(e);t.name?(s&&o.push(s),s=t):null!=s?s.description+="\n"+t.description:s=t};for(const e of i.children)if(["ol","ul"].includes(e.tagName.toLowerCase()))for(const t of e.children)l(t);else l(e);return null!=s&&o.push(s),o},a=e=>l(e,0),r=e=>l(e,1),d=e=>l(e,2),c=e=>{if(!e)return;const t=[];for(const n of e.split(", ")){const e=n.split(" ");t.push({name:e[0],modifier:e[1]})}return 0!==t.length?t:void 0},m=l=>{var m,u,v,g;const p=o(l,"Challenge"),b=null!==(m=null==p?void 0:p.slice(0,p.indexOf(" ")))&&void 0!==m?m:"1/4",y=null!==(u=null==p?void 0:p.slice(p.indexOf(" ")+1))&&void 0!==u?u:"25",f=(e=>{var t,n;const i=(null===(n=null===(t=e.getElementsByClassName("mon-stat-block__meta")[0])||void 0===t?void 0:t.textContent)||void 0===n?void 0:n.trim())||void 0;if(!i)return{size:void 0,type:void 0,subtype:void 0,alignment:void 0};const s=i.match(/(?<size>[a-zA-Z]+)(?: (?<type>[a-zA-Z]+))?(?: \((?<subtype>.+)\))?(?:, (?<alignment>.+))?/);return(null==s?void 0:s.groups)?{size:s.groups.size,type:s.groups.type,subtype:s.groups.subtype,alignment:s.groups.alignment}:{size:void 0,type:void 0,subtype:void 0,alignment:void 0}})(l),C={name:e(l),size:f.size,type:f.type,subtype:f.subtype,alignment:f.alignment,hp:parseInt(null!==(v=t(l,"Hit Points"))&&void 0!==v?v:"0"),hitDice:n(l,"Hit Points"),ac:parseInt(null!==(g=t(l,"Armor Class"))&&void 0!==g?g:"10"),acDescription:n(l,"Armor Class"),speed:t(l,"Speed"),abilityScores:{strength:i(l,"STR"),strengthMod:s(l,"STR"),dexterity:i(l,"DEX"),dexterityMod:s(l,"DEX"),constitution:i(l,"CON"),constitutionMod:s(l,"CON"),intelligence:i(l,"INT"),intelligenceMod:s(l,"INT"),wisdom:i(l,"WIS"),wisdomMod:s(l,"WIS"),charisma:i(l,"CHA"),charismaMod:s(l,"CHA")},savingThrows:c(o(l,"Saving Throws")),skills:c(o(l,"Skills")),senses:o(l,"Senses"),languages:o(l,"Languages"),damageVulnerabilities:o(l,"Damage Vulnerabilities"),damageResistances:o(l,"Damage Resistances"),damageImmunities:o(l,"Damage Immunities"),conditionImmunities:o(l,"Condition Immunities"),cr:b,crXp:y,proficiencyBonus:o(l,"Proficiency Bonus"),traits:a(l),actions:r(l),legendaryActions:d(l)};var h;return h=C,Object.keys(h).forEach((e=>void 0===h[e]&&delete h[e])),C},u=e=>`"${e.replace(/(\r\n|\r|\n)/g,"\\n")}"`,v=e=>{const t=document.createElement("button");t.textContent="Copy YAML",t.onclick=()=>{const t=(e=>{let t="";if(e.name&&(t+=`name: ${e.name}\n`),e.size&&(t+=`size: ${e.size}\n`),e.type&&(t+=`type: ${e.type}\n`),e.subtype&&(t+=`subtype: ${e.subtype}\n`),e.alignment&&(t+=`alignment: ${e.alignment}\n`),e.hp&&(t+=`hp: ${e.hp}\n`),e.hitDice&&(t+=`hit_dice: ${e.hitDice.slice(1,e.hitDice.length-1)}\n`),e.ac&&(t+=`ac: ${e.ac}\n`),e.acDescription&&(t+=`ac_description: ${e.acDescription}\n`),e.speed&&(t+=`speed: ${e.speed}\n`),e.abilityScores&&(t+=`stats: [${e.abilityScores.strength}, ${e.abilityScores.dexterity}, ${e.abilityScores.constitution}, ${e.abilityScores.intelligence}, ${e.abilityScores.wisdom}, ${e.abilityScores.charisma}]\n`),e.savingThrows&&e.savingThrows.length>0){t+="saves:\n";for(const n of e.savingThrows)t+=`  - ${n.name}: ${n.modifier}\n`}if(e.skills&&e.skills.length>0){t+="skillsaves:\n";for(const n of e.skills)t+=`  - ${n.name}: ${n.modifier}\n`}if(e.senses&&(t+=`senses: ${e.senses}\n`),e.languages&&(t+=`languages: ${e.languages}\n`),e.damageVulnerabilities&&(t+=`damage_vulnerabilities: ${e.damageVulnerabilities}\n`),e.damageResistances&&(t+=`damage_resistances: ${e.damageResistances}\n`),e.damageImmunities&&(t+=`damage_immunities: ${e.damageImmunities}\n`),e.conditionImmunities&&(t+=`condition_immunities: ${e.conditionImmunities}\n`),e.cr&&(t+=`cr: ${e.cr}\n`),e.traits&&e.traits.length>0){t+="traits:\n";for(const n of e.traits)t+=`  - name: ${n.name}\n`,t+=`    desc: ${u(n.description)}\n`}if(e.actions&&e.actions.length>0){t+="actions:\n";for(const n of e.actions)t+=`  - name: ${n.name}\n`,t+=`    desc: ${u(n.description)}\n`}if(e.legendaryActions&&e.legendaryActions.length>0){t+="legendary_actions:\n";for(const n of e.legendaryActions)t+=`  - name: ${n.name}\n`,t+=`    desc: ${u(n.description)}\n`}return t})(m(e));navigator.clipboard.writeText(t)},e.parentElement.insertBefore(t,e.nextSibling);const n=document.createElement("button");n.textContent="Copy JSON",n.onclick=()=>{const t=m(e);console.log(t),navigator.clipboard.writeText(JSON.stringify(t))},e.parentElement.insertBefore(n,e.nextSibling)},g="mon-stat-block";new MutationObserver((e=>{const t=[];for(const n of e)for(const e of n.addedNodes){if(e.nodeType!==Node.ELEMENT_NODE)continue;const n=e;n.classList.contains(g)?t.push(n):n.firstElementChild&&t.push(...n.getElementsByClassName(g))}t.forEach(v)})).observe(document,{childList:!0,subtree:!0}),[...document.getElementsByClassName(g)].forEach(v)})()})();